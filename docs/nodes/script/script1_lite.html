

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Script Node Lite &mdash; Sverchok 0.5 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Sverchok 0.5 documentation" href="../../index.html"/>
        <link rel="up" title="Script" href="script_index.html"/>
        <link rel="next" title="topology simple" href="topology_simple.html"/>
        <link rel="prev" title="multi exec" href="multi_exec.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../main.html" class="fa fa-home"> Sverchok</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#troubleshooting-installation-errors">Troubleshooting Installation Errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geometry.html">Introduction to geometry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geometry.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geometry.html#d-geometry">3D Geometry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../curves.html">Curve</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../surfaces.html">Surface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../surfaces.html#implcit-surfaces">Implcit Surfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nurbs.html">NURBS: Curves and Surfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../nurbs.html#terminology">Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nurbs.html#workflow">Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nurbs.html#blender-nurbs-compatibility">Blender NURBS compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../fields.html">Scalar Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fields.html#vector-fields">Vector Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../solids.html">Solid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../induction.html">Introduction to Sverchok</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../induction.html#unit-00-introduction-to-nodeview-and-3dview">Unit 00 - Introduction to NodeView and 3DView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../induction.html#unit-01-introduction-to-modular-components">Unit 01 - Introduction to modular components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../panels.html">Panels of Sverchok</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#node-tree-panel">Node Tree Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#nodes-toolbar">Nodes Toolbar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#presets-panel">Presets Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#node-s-n-panel">Node’s N panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#d-panel">3D Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#import-export-panel">Import Export Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#groups-panel">Groups Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#templates-in-menu-panel-of-nodes-area">Templates in menu panel of nodes area</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generator/generator_index.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators_extended/generators_extended_index.html">Generators Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../curve/curve_index.html">Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../surface/surface_index.html">Surfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../field/field_index.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solid/solid_index.html">Solids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spatial/spatial_index.html">Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/transforms_index.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzer/analyzer_index.html">Analyzers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_change/modifier_change_index.html">Modifier Change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_make/modifier_make_index.html">Modifier Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CAD/CAD_index.html">CAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../number/number_index.html">Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/vector_index.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrix/matrix_index.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quaternion/quaternion_index.html">Quaternion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color/color_index.html">Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic/logic_index.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_main/list_main_index.html">List Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_struct/list_struct_index.html">List Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_masks/list_masks_index.html">List Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_mutators/list_mutators_index.html">List Mutators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionary/dictionary_index.html">Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viz/viz_index.html">Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/text_index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="script_index.html">Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene/scene_index.html">Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_nodes/object_nodes_index.html">Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/layout_index.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/network_index.html">Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pulga_physics/pulga_physics_index.html">Pulga Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchange/exchange_index.html">Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svg/svg_index.html">SVG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#our-workflow">Our workflow:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#what-not-to-do">What not to do:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#helpful-hints">Helpful hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#to-create-a-node">To create a node:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#some-rules">SOME RULES:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute_small_things.html">Contributing small things</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#pull-requests">Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#informal-code-suggestions">Informal code suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#non-one-liners">Non one-liners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#what-gets-our-attention">What gets our attention</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#general-guidelines">General guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../testing.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html#preface">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html#implementation">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html#continuous-integration">Continuous Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../shortcuts.html">Shortcuts</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../main.html">Sverchok</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../main.html">Docs</a> &raquo;</li>
      
          <li><a href="../../nodes.html">Nodes</a> &raquo;</li>
      
          <li><a href="script_index.html">Script</a> &raquo;</li>
      
    <li>Script Node Lite</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/nodes/script/script1_lite.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="script-node-lite">
<h1>Script Node Lite<a class="headerlink" href="#script-node-lite" title="Permalink to this headline">¶</a></h1>
<div class="section" id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Permalink to this headline">¶</a></h2>
<p>This node allows the user to write arbitrary node logic in Python. It is useful
when there is no standard node in Sverchok for your particular purpose; you may
want to use this if you want some complex piece of logic to be used in a couple
of your own projects, or if you are prototyping a new standard node for
Sverchok itself.</p>
<p>The script node implementation is intended for quick, non serious, experimentation.</p>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A small amount of boilerplate (called a directive) at the top of your scripts used to define what sockets and ui elements you want. More about this in the Syntax segment below.</li>
<li>We provide example scripts to get you up an running quickly. These come in the form of templates and they can be imported directly into the node from the N panel. They can be imported directly into <strong>node</strong>, or to a <strong>text block</strong>.</li>
</ul>
<img alt="../../_images/ff29eed2-2a5c-11e7-9594-f85295178f57.png" src="../../_images/ff29eed2-2a5c-11e7-9594-f85295178f57.png" />
<ul>
<li><p class="first">You must declare an input socket, but outputs are optional.</p>
</li>
<li><p class="first">You can set defaults for input numbers, vectors, and list sockets.</p>
</li>
<li><p class="first">You can set the level of nestedness; means you don’t need to unwrap/index stuff via code</p>
</li>
<li><p class="first">You can append a UI drawing funcion to the default drawing function of SNLite, in case you want to display a variety of UI elements from anywhere in Blender in one place.</p>
</li>
<li><p class="first">has the option to <strong>auto inject</strong> the list of variable references as <strong>parameters</strong> much like javascript does for <strong>arguments</strong> inside a function. In essence implemented like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>To enable this feature add the word “inject” on its own line in the header. If you have 3 input sockets, called <code class="docutils literal notranslate"><span class="pre">radius,</span> <span class="pre">amplitude,</span> <span class="pre">num_verts</span></code>,  then the variable <code class="docutils literal notranslate"><span class="pre">parameters</span></code> will be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="n">radius</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">,</span> <span class="n">num_verts</span><span class="p">]</span>
</pre></div>
</div>
<p>This is handy for inner functions that are arranged to take arguments in exactly that order. See &lt;<a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-264705956">https://github.com/nortikin/sverchok/issues/942#issuecomment-264705956</a>&gt;_ for an example use. Usually you’ll use the ‘vectorize’ function with this to zip through each pair of arguments. see <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890">https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890</a></p>
<ul>
<li><p class="first">added a helper function <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">sverchok.utils.snlite_utils</span> <span class="pre">import</span> <span class="pre">vectorize</span></code> , and this is made available to scripts without the need to import it now. Also see <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890">https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890</a></p>
</li>
<li><p class="first">added an include directive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">...</span>
<span class="sd">include &lt;your_text_name&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>The include directive ensures the dependency is also stored in the gist when exported as json. The file named in angle brackets must be present in the current .blend file’s text blocks.</p>
<ul>
<li><p class="first">added two (semi) customizable enums to make the custom draw a bit more useful, called <strong>self.custom_enum</strong> and <strong>self.custom_enum_2</strong>. No spaces in the elements, yes spaces between the elements.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">enum = word1 word2 word3</span>
<span class="sd">enum2 = raw clean</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>you make them visible on the ui by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;custom_enum&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;custom_enum_2&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>in your code you might use them this way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_enum_2</span> <span class="o">==</span> <span class="s2">&quot;clean&quot;</span><span class="p">:</span>
    <span class="n">v_out</span><span class="p">,</span> <span class="n">f_out</span> <span class="o">=</span> <span class="n">join_tris</span><span class="p">(</span><span class="n">b_verts</span><span class="p">,</span> <span class="n">rawdata</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">params</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">v_out</span> <span class="o">=</span> <span class="n">b_verts</span>
    <span class="n">f_out</span> <span class="o">=</span> <span class="n">rawdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>see a working script that uses two enums here: <a class="reference external" href="https://github.com/nortikin/sverchok/pull/3455">https://github.com/nortikin/sverchok/pull/3455</a></p>
<ul>
<li><p class="first">add <code class="docutils literal notranslate"><span class="pre">ddir</span></code> (a dunderless dir() function) to local namespace.  <code class="docutils literal notranslate"><span class="pre">ddir(object,</span> <span class="pre">filter_str=&quot;some_string&quot;)</span></code> . filter_str is optional:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ddir</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">filter_str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">vals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filter_str</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_str</span> <span class="ow">in</span> <span class="n">n</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">vals</span>
</pre></div>
</div>
</li>
<li><p class="first">There are several aliases provided so they don’t need to be imported manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bmesh_from_pydata</span>
<span class="n">pydata_from_bmesh</span>
<span class="n">ddir</span>
<span class="n">np</span>
<span class="n">bpy</span>
<span class="n">vectorize</span>
</pre></div>
</div>
</li>
<li><p class="first">add operator callback. See: <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-300162017">https://github.com/nortikin/sverchok/issues/942#issuecomment-300162017</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">in verts v</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">my_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;verts&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sv_get</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>

<span class="bp">self</span><span class="o">.</span><span class="n">make_operator</span><span class="p">(</span><span class="s1">&#39;my_operator&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
    <span class="n">cb_str</span> <span class="o">=</span> <span class="s1">&#39;node.scriptlite_custom_callback&#39;</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">cb_str</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;show me&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cb_name</span><span class="o">=</span><span class="s1">&#39;my_operator&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first"><cite>statefull</cite> (like Processing’s setup() ):  see this <a class="reference external" href="https://github.com/nortikin/sverchok/issues/1734#issuecomment-313844934">Reaction Diffusion thread / example</a>.</p>
</li>
<li><p class="first">‘reloading / imports’ :  see <a class="reference external" href="https://github.com/nortikin/sverchok/issues/1570">importlib example here</a>, this is especially useful for working with more complex code where you define classes outside of the snlite main script.</p>
</li>
</ul>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>To intialize a scriptnode you must provide a “directive”, it’s where you define sockets and other scriptnode specific properties. The directive is rigidly wrapped with
a pair of tripple quote marks: <strong>“”“</strong>, never single quotes like <strong>‘’‘</strong>.</p>
<p>The syntax looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">in socketname  type  default=x nested=n</span>
<span class="sd">in socketname2 type  default=x nested=n</span>
<span class="sd">out socketname type  # (optional)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="o">&lt;</span> <span class="nb">any</span> <span class="n">python</span> <span class="n">code</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>This tripple quoted area (a “directive comment”, or <em>header</em>) must be the first thing in the <code class="docutils literal notranslate"><span class="pre">.py</span></code> file.  It helps declare sockets and defaults and is a space to enable certain options (more about this later). The above example header can be written slightly less verbose:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&quot;&quot;&quot;
in socketname   type  d=x n=i
in socketname2  type  d=x n=i
out socketname  type
&quot;&quot;&quot;
&lt; any python code &gt;
```
</pre></div>
</div>
<dl class="docutils">
<dt>A few things to notice:</dt>
<dd><ul class="first last simple">
<li>i’ve dropped the words <code class="docutils literal notranslate"><span class="pre">default</span></code> and <code class="docutils literal notranslate"><span class="pre">nested</span></code> in favour or <code class="docutils literal notranslate"><span class="pre">d</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code>, but you’ll also see examples where I just write  <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">socketname</span> <span class="pre">type</span> <span class="pre">.=200</span> <span class="pre">.=2</span></code>  , the <code class="docutils literal notranslate"><span class="pre">d</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code> don’t mean anything, the only real requirement there is that there’s a single character directly to the left of the <code class="docutils literal notranslate"><span class="pre">=</span></code>.</li>
<li><dl class="first docutils">
<dt>Socket names will be injected into the local scope, for example:</dt>
<dd><ul class="first last">
<li>if you have an input socket called ‘normals’, then there will be a variable called normals available to read from.</li>
<li>if you have an output socket called ‘edges_out’, then that variable is also automatically available for you to insert data into - behind the scene snlite will do <cite>edges_out = []</cite> prior to executing your code. At the end of your code SNLite will read whatever the content of your <cite>edges_out</cite> is and use that as the output values for that socket.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<ul>
<li><p class="first"><strong>inputs</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">direction</span>    <span class="n">socketname</span>     <span class="n">sockettype</span>     <span class="n">default</span>     <span class="n">nestedness</span>
<span class="ow">in</span>           <span class="n">radius</span>         <span class="n">s</span>              <span class="o">.=</span><span class="mf">1.2</span>       <span class="o">.=</span><span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p class="first"><cite>direction</cite> <code class="docutils literal notranslate"><span class="pre">in</span></code> means “make an input”.</p>
</li>
<li><p class="first"><cite>socketname</cite> means “give this socket a name / identifier”</p>
</li>
<li><dl class="first docutils">
<dt><cite>sockettype</cite> declares what kind of socket is to be used. The supported types are:</dt>
<dd><ul class="first last simple">
<li>Vertices (<code class="docutils literal notranslate"><span class="pre">v</span></code>)</li>
<li>Strings/Lists (<code class="docutils literal notranslate"><span class="pre">s</span></code>)</li>
<li>Matrices (<code class="docutils literal notranslate"><span class="pre">m</span></code>)</li>
<li>Curves (<code class="docutils literal notranslate"><span class="pre">C</span></code>)</li>
<li>Surfaces (<code class="docutils literal notranslate"><span class="pre">S</span></code>)</li>
<li>Solids (<code class="docutils literal notranslate"><span class="pre">So</span></code>)</li>
<li>Scalar fields (<code class="docutils literal notranslate"><span class="pre">SF</span></code>)</li>
<li>Vector fields (<code class="docutils literal notranslate"><span class="pre">VF</span></code>)</li>
<li>Objects (<code class="docutils literal notranslate"><span class="pre">o</span></code>)</li>
<li>File Path (<code class="docutils literal notranslate"><span class="pre">FP</span></code>)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><cite>default</cite> is where you give a default initialization value. A list, tuple, float, or int..</dt>
<dd><ul class="first last simple">
<li><strong>warning</strong>:  don’t include any spaces in the iterables - this will break parsing</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><cite>nestedness</cite> deserves some explanation. In sverchok every data structure is nested in some way.</p>
</li>
</ul>
<p>Some familiarity with python or the concept of sublists (lists of lists) is needed to understand this. It’s harder to explain than to use.</p>
<img alt="../../_images/639cdc34-fd9f-11e6-8aa2-0238f2020373.png" src="../../_images/639cdc34-fd9f-11e6-8aa2-0238f2020373.png" />
<ul>
<li><p class="first"><cite>n=2</cite> means <code class="docutils literal notranslate"><span class="pre">named_input.sv_get()[0][0]</span></code> - means you only want a single value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">named_input</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="o">.....</span><span class="p">]</span>  <span class="c1">#  or  [[20]]</span>
<span class="n">value_to_use</span> <span class="o">=</span> <span class="n">named_input</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># 20</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt><cite>n=1</cite> means <code class="docutils literal notranslate"><span class="pre">named_input.sv_get()[0]</span></code></dt>
<dd><ul class="first last simple">
<li>You would use <cite>n=1</cite> if you only ever plan to work with the first incoming sublist. This will essentially ignore the rest of the incoming data on that socket.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><cite>n=0</cite> means <code class="docutils literal notranslate"><span class="pre">named_input.sv_get()</span></code></dt>
<dd><ul class="first last simple">
<li>Generally you would use this if you plan to do something with each sublist coming in, for example if the input contains several lists of verts like here:</li>
</ul>
</dd>
</dl>
</li>
</ul>
<img alt="../../_images/d1c8861e-ae3e-11e6-9de6-501f07a58606.png" src="../../_images/d1c8861e-ae3e-11e6-9de6-501f07a58606.png" />
<ul>
<li><p class="first"><strong>outputs</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">direction</span>    <span class="n">socketname</span>     <span class="n">sockettype</span>
<span class="n">out</span>          <span class="n">verts</span>          <span class="n">v</span>
</pre></div>
</div>
</li>
<li><p class="first"><cite>direction</cite> <code class="docutils literal notranslate"><span class="pre">out</span></code> means “make an output”.</p>
</li>
<li><p class="first"><cite>socketname</cite> means “give this socket a name / identifier”</p>
</li>
<li><p class="first"><cite>sockettype</cite> declares what kind of socket: Vertices (v), Strings/Lists (s), Matrices (m), Objects (o)</p>
<blockquote>
<div><p>There’s no _default_ or _nested_ value for output sockets, generally speaking the default inputs will suffice to generate a default outputs.</p>
</div></blockquote>
</li>
</ul>
<p>Learn by example, the best way to get a feel for what works and doesn’t is to have a look at the existing examples in several places:</p>
<blockquote>
<div><ul class="simple">
<li>this thread:  <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942">https://github.com/nortikin/sverchok/issues/942</a></li>
<li>in <code class="docutils literal notranslate"><span class="pre">node_scripts/SNLite_templates</span></code></li>
<li>the <code class="docutils literal notranslate"><span class="pre">draw_buttons_ext</span></code> (Right side panel of the NodeView -&gt; Properties)</li>
</ul>
</div></blockquote>
<p>The templates don’t have much defensive code, and some nodes that expect input
will turn _red_ until they get input via a socket. You can add code to defend
against this, but I find it useful to be notified quickly if the input is
unexpected, the node will gracefully fail.</p>
</div>
<div class="section" id="inputs-outputs">
<h2>Inputs / Outputs<a class="headerlink" href="#inputs-outputs" title="Permalink to this headline">¶</a></h2>
<p>All inputs and outputs of this node are defined in the script.</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>This node has two states:</p>
<ol class="arabic">
<li><p class="first">When no script is loaded, it shows:</p>
<ul class="simple">
<li>a drop-down box, where you have to select a Blender’s text block with script text;</li>
<li>and a “Plug” button.</li>
</ul>
<p>When you select the script and press “Plug”, the script is loaded, and the node changes it’s appearance.</p>
</li>
<li><p class="first">When a script is loaded, the node displays all inputs and parameters defined by the script; Additionally, the following buttons are shown:</p>
<ul class="simple">
<li><strong>Animate Node</strong>. When checked, the node is updated during animation playback, on each frame change event.</li>
<li><strong>Update Node</strong>. Click this to manually trigger execution of the node.</li>
<li><strong>Reload</strong>. Click this to parse and load the script text again - this makes sense if you’ve changed the script.</li>
<li><strong>Clear</strong>. Reset the node to the state when no script was loaded, so you will be able to select another script.</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="examples-of-usage">
<h2>Examples of usage<a class="headerlink" href="#examples-of-usage" title="Permalink to this headline">¶</a></h2>
<p>Please refer to the initial thread: <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942">https://github.com/nortikin/sverchok/issues/942</a>.</p>
<p>In the N panel of the node there is a drop-down menu allowing you to select one
of example scripts which are distributed with Sverchok.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="topology_simple.html" class="btn btn-neutral float-right" title="topology simple">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multi_exec.html" class="btn btn-neutral" title="multi exec"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014...2020, sverchok team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>